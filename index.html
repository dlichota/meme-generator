<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meme Generator</title>
    <link rel="stylesheet" href="./css/styles.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.5.0/fabric.min.js"></script>
</head>

<body>
    <h1>Meme Generator</h1>
    <!--<div id="template-selectors"></div>
        <button id="download">Download Meme</button>
        <canvas id="canvas"></canvas>
        <script
            type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.4.0/fabric.min.js"
        ></script>
        <script src="./js/index.js" type="module"></script>-->
    <input type="file" id="imageLoader" name="imageLoader" />
    <canvas id="c" width="500" height="500"></canvas>

    <script>
        var canvas = new fabric.Canvas('c');

        document.getElementById('imageLoader').addEventListener('change', function(e) {
            var reader = new FileReader();
            reader.onload = function(event) {
                var imgObj = new Image();
                imgObj.src = event.target.result;
                imgObj.onload = function() {
                    var image = new fabric.Image(imgObj);
                    image.set({
                        angle: 0,
                        padding: 10,
                        cornersize: 10,
                        height: 500,
                        width: 500,
                    });
                    canvas.centerObject(image);
                    canvas.add(image);
                    canvas.renderAll();
                }
            }
            reader.readAsDataURL(e.target.files[0]);
        });

        // Add text
        var text = new fabric.IText('Tap and Type', {
            left: 100,
            top: 100,
            fontFamily: 'arial',
            fill: '#333',
            fontSize: 50
        });
        canvas.add(text);

        // Make the canvas object (text) selectable and resizable
        text.set({
            borderColor: 'red',
            cornerColor: 'green',
            cornerSize: 6,
            transparentCorners: false
        });

        canvas.on('object:modified', function() {
            canvas.renderAll();
        });

    </script>
</body>

</html>
